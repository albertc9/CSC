from pymtl3 import *

class MinMaxUnit(Component):
    """
    MinMaxUnit 是一个组合逻辑模块，用于比较两个输入值并输出其中的最小值和最大值。
    """
    def construct(s, nbits=8):
        # ---------------------------------------------------------------------
        # 接口定义
        # ---------------------------------------------------------------------
        s.in0 = InPort(nbits)  # 输入端口0
        s.in1 = InPort(nbits)  # 输入端口1
        s.out_min = OutPort(nbits)  # 最小值输出端口
        s.out_max = OutPort(nbits)  # 最大值输出端口

        # ---------------------------------------------------------------------
        # 组合逻辑
        # ---------------------------------------------------------------------
        @update
        def comb_logic():
            if s.in0 <= s.in1:  # 如果 in0 小于等于 in1
                s.out_min @= s.in0  # 最小值为 in0
                s.out_max @= s.in1  # 最大值为 in1
            else:  # 如果 in0 大于 in1
                s.out_min @= s.in1  # 最小值为 in1
                s.out_max @= s.in0  # 最大值为 in0

        # ---------------------------------------------------------------------
        # 行跟踪（用于调试）
        # ---------------------------------------------------------------------
        def line_trace(s):
            return f"in0={s.in0} in1={s.in1} min={s.out_min} max={s.out_max}"